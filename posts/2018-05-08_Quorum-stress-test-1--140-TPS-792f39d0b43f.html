<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Quorum stress-test 1: 140 TPS</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Quorum stress-test 1: 140 TPS</h1>
</header>
<section data-field="subtitle" class="p-summary">
Recently, I stress-tested a Quorum network consisting of 2 nodes on separate machines, and the result was 140 tps‚Ä¶
</section>
<section data-field="body" class="e-content">
<section name="85d3" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="730f" id="730f" class="graf graf--h3 graf--leading graf--title">Quorum stress-test 1: 140¬†TPS</h3></div><div class="section-inner sectionLayout--fullWidth"><figure name="b348" id="b348" class="graf graf--figure graf--layoutFillWidth graf-after--h3"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 47.5%;"></div><img class="graf-image" data-image-id="1*b1f2TTAdymBaEOPxmZSnaw.jpeg" data-width="2000" data-height="950" src="https://cdn-images-1.medium.com/max/2560/1*b1f2TTAdymBaEOPxmZSnaw.jpeg"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><blockquote name="318b" id="318b" class="graf graf--pullquote graf-after--figure">Recently, I stress-tested a Quorum network consisting of 2 nodes on separate machines, and the result was 140¬†tps‚Ä¶</blockquote><p name="c71a" id="c71a" class="graf graf--p graf-after--pullquote">So, let‚Äôs see how to create a 2 node Quorum network in just a few minutes so that you can also stress-test your own Quorum network. But if you are new to Quorum, I suggest you <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">go through the below article</em></strong>, to get a better understanding of this article.</p><div name="1748" id="1748" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/@vaibhavsaini_67863/quorum-101-getting-started-with-quorum-9906294ea45b" data-href="https://medium.com/@vaibhavsaini_67863/quorum-101-getting-started-with-quorum-9906294ea45b" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/@vaibhavsaini_67863/quorum-101-getting-started-with-quorum-9906294ea45b"><strong class="markup--strong markup--mixtapeEmbed-strong">Quorum 101: Getting started with Quorum</strong><br><em class="markup--em markup--mixtapeEmbed-em">This post marks the first in a new Quorum series I am starting in an effort to provide some easy to read instructions‚Ä¶</em>medium.com</a><a href="https://medium.com/@vaibhavsaini_67863/quorum-101-getting-started-with-quorum-9906294ea45b" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="c3c0f8d0f94e6026565320b3af271730" data-thumbnail-img-id="1*Ajlx1T--orDB8409_7c3oA.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*Ajlx1T--orDB8409_7c3oA.png);"></a></div><p name="8646" id="8646" class="graf graf--p graf-after--mixtapeEmbed">If you are all set, then let‚Äôs get started.</p><h3 name="8d08" id="8d08" class="graf graf--h3 graf-after--p">Environment Used</h3><p name="a211" id="a211" class="graf graf--p graf-after--h3">I am using 2 separate AWS machines (<strong class="markup--strong markup--p-strong">Ubuntu Server 16.04 LTS, t2-micro</strong>) for 2 separate Quorum nodes. Let us call them <code class="markup--code markup--p-code">quorum-peer-1 </code>and <code class="markup--code markup--p-code">quorum-peer-2</code>.</p><figure name="c3be" id="c3be" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*7tEK7YYgKVoQvWO7xGmyqA.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*7tEK7YYgKVoQvWO7xGmyqA.png"></div><figcaption class="imageCaption">2 nodes on¬†AWS</figcaption></figure><p name="4947" id="4947" class="graf graf--p graf-after--figure">Now, if you are running 2 nodes as above then let‚Äôs assume IP address of <code class="markup--code markup--p-code">quorum-peer-1</code> is <code class="markup--code markup--p-code">IP-1</code> and IP address of <code class="markup--code markup--p-code">quorum-peer-2</code> is <code class="markup--code markup--p-code">IP-2</code>.</p><p name="1bc5" id="1bc5" class="graf graf--p graf-after--p">Also, open the following ports in the security group(it‚Äôs better to use same security group for both the nodes).</p><p name="bb6d" id="bb6d" class="graf graf--p graf-after--p"><em class="markup--em markup--p-em">Ports to open</em>(<strong class="markup--strong markup--p-strong">all TCP ports¬†,accessible from anywhere</strong>):</p><ul class="postList"><li name="8541" id="8541" class="graf graf--li graf-after--p">9001</li><li name="1f52" id="1f52" class="graf graf--li graf-after--li">9004</li><li name="9a48" id="9a48" class="graf graf--li graf-after--li">21000</li><li name="cd8d" id="cd8d" class="graf graf--li graf-after--li">21003</li><li name="4804" id="4804" class="graf graf--li graf-after--li">22000</li><li name="9454" id="9454" class="graf graf--li graf-after--li">22003</li><li name="8620" id="8620" class="graf graf--li graf-after--li">50401</li><li name="9158" id="9158" class="graf graf--li graf-after--li">50404</li></ul><h3 name="880d" id="880d" class="graf graf--h3 graf-after--li">Installing prerequisites</h3><p name="8f11" id="8f11" class="graf graf--p graf-after--h3">Now, we have to install prerequisites on both the nodes(better option is to use a snapshot and use that for installing prerequisites on both the machines). To install the prerequisites just copy and run the below script on both the machines.</p><figure name="1989" id="1989" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/vasa-develop/ff34688c7cb7ae8bb6de9587a4752969.js"></script></figure><h3 name="e995" id="e995" class="graf graf--h3 graf-after--figure">Installing the Quorum application</h3><p name="0d8b" id="0d8b" class="graf graf--p graf-after--h3">Now ssh into the <code class="markup--code markup--p-code">quorum-peer-1 </code>and clone the below repository.</p><pre name="f330" id="f330" class="graf graf--pre graf-after--p">git clone <a href="https://github.com/vasa-develop/quorum-testnode-1" data-href="https://github.com/vasa-develop/quorum-testnode-1" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://github.com/vasa-develop/quorum-testnode-1</a>;<br>cd quorum-testnode-1</pre><p name="971d" id="971d" class="graf graf--p graf-after--pre">Similarly, ssh into <code class="markup--code markup--p-code">quorum-peer-2 </code>and clone the below repository.</p><pre name="52fa" id="52fa" class="graf graf--pre graf-after--p">git clone <a href="https://github.com/vasa-develop/quorum-testnode-2" data-href="https://github.com/vasa-develop/quorum-testnode-2" class="markup--anchor markup--pre-anchor" rel="noopener" target="_blank">https://github.com/vasa-develop/quorum-testnode-2</a>;<br>cd quorum-testnode-2</pre><p name="db96" id="db96" class="graf graf--p graf-after--pre">And Voila, you are set to test the network.</p><p name="38da" id="38da" class="graf graf--p graf-after--p">P.S. special thanks to benchmarking scripts ‚Äúchainhammer‚Äù<br>¬†<a href="https://gitlab.com/electronDLT/chainhammer" data-href="https://gitlab.com/electronDLT/chainhammer" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">https://gitlab.com/electronDLT/chainhammer</a><br>¬†by Dr Andreas Krueger, <a href="http://electron.org.uk/" data-href="http://electron.org.uk/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Electron.org.uk</a>, London</p><h3 name="7734" id="7734" class="graf graf--h3 graf-after--p">Initializing network</h3><p name="9f45" id="9f45" class="graf graf--p graf-after--h3">Now execute the below command on both of the machines simultaneously as a <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">super user </em></strong>(using <code class="markup--code markup--p-code">sudo su</code>).</p><pre name="8a7f" id="8a7f" class="graf graf--pre graf-after--p">./start-peer.sh &lt;IP-1&gt; &lt;IP-2&gt;; tail -f qdata/logs/constellation*.log</pre><p name="a578" id="a578" class="graf graf--p graf-after--pre">for example if <code class="markup--code markup--p-code">IP-1 </code>is 12.45.78.55 and <code class="markup--code markup--p-code">IP-2 </code>is 12.45.78.56, then the above command will be like</p><pre name="ff76" id="ff76" class="graf graf--pre graf-after--p">./start-peer.sh 12.45.78.55 12.45.78.56; <br>tail -f qdata/logs/constellation*.log</pre><blockquote name="1bde" id="1bde" class="graf graf--blockquote graf-after--pre">Make sure that the IP‚Äôs are in correct order, or the script will not work as expected</blockquote><p name="ce3b" id="ce3b" class="graf graf--p graf-after--blockquote">You will see output similar to below ones.</p><figure name="3297" id="3297" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*3j5kzLIEvIWRVq0tBRUXbA.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*3j5kzLIEvIWRVq0tBRUXbA.png"></div><figcaption class="imageCaption">quorum-peer-1 output</figcaption></figure><figure name="b0a1" id="b0a1" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*-QuC43FqFq0SKrp7FWiWDw.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*-QuC43FqFq0SKrp7FWiWDw.png"></div><figcaption class="imageCaption">quorum-peer-2 output</figcaption></figure><p name="4e41" id="4e41" class="graf graf--p graf-after--figure">If you encounter some error then execute¬†<code class="markup--code markup--p-code">./stop.sh </code>and again repeat the ‚ÄúInitializing network‚Äù step.</p><p name="66d7" id="66d7" class="graf graf--p graf-after--p">Press CTRL+C to exit the logs.</p><h3 name="4954" id="4954" class="graf graf--h3 graf-after--p">Testing the¬†Network</h3><p name="0c88" id="0c88" class="graf graf--p graf-after--h3">Now, it‚Äôs time to test our network. In the <code class="markup--code markup--p-code">quorum-peer-1 </code>execute the below command</p><pre name="bdf4" id="bdf4" class="graf graf--pre graf-after--p">./runscript.sh script1.js</pre><p name="905b" id="905b" class="graf graf--p graf-after--pre">Now, go to <code class="markup--code markup--p-code">quorum-peer-2 </code>and execute the below command</p><pre name="5254" id="5254" class="graf graf--pre graf-after--p">python3 tps.py</pre><p name="06cc" id="06cc" class="graf graf--p graf-after--pre">You will see output like the below one</p><figure name="eccf" id="eccf" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*PBg6x6d6D46A0FCn9zQ3Ig.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*PBg6x6d6D46A0FCn9zQ3Ig.png"></div><figcaption class="imageCaption">quorum-peer-2 output</figcaption></figure><p name="7a72" id="7a72" class="graf graf--p graf-after--figure">Now, here is the last command to measure the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">TPS. </em></strong>Execute the below command to start bombarding private transactions from <code class="markup--code markup--p-code">quorum-peer-1 </code>to <code class="markup--code markup--p-code">quorum-peer-2</code>¬†. Execute the following command in <code class="markup--code markup--p-code">quorum-peer-1</code> and you will see output similar to screens shown below.</p><pre name="d2eb" id="d2eb" class="graf graf--pre graf-after--p">python3 send.py</pre><figure name="d4b7" id="d4b7" class="graf graf--figure graf-after--pre"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*xTpxB7Bbk2gKogCAlAYI0w.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*xTpxB7Bbk2gKogCAlAYI0w.png"></div><figcaption class="imageCaption">quorum-peer-1 transaction bombarding</figcaption></figure><figure name="fb7d" id="fb7d" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*AqCiWL83JPgZWj-mt7m25Q.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*AqCiWL83JPgZWj-mt7m25Q.png"></div><figcaption class="imageCaption">quorum-peer-2 tps¬†results</figcaption></figure><blockquote name="99e6" id="99e6" class="graf graf--blockquote graf-after--figure">Now as you can see, in the above screen that for<strong class="markup--strong markup--blockquote-strong"> first 1000 trxs the average tps rate is around 140 tps.</strong></blockquote><p name="c383" id="c383" class="graf graf--p graf-after--blockquote">Well, that‚Äôs better than many blockchains, but not really mind blowing.</p><figure name="2c4e" id="2c4e" class="graf graf--figure graf--iframe graf-after--p"><iframe src="https://gfycat.com/ifr/CleanTediousHowlermonkey" width="480" height="368" frameborder="0" scrolling="no"></iframe><figcaption class="imageCaption">when you go for 1000 tps but end up with 140 tps‚Ä¶</figcaption></figure><p name="6bbe" id="6bbe" class="graf graf--p graf-after--figure graf--trailing">Well, that was it‚Ä¶your first Quorum network stress-test. <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">If you made it to the end then comment you TPS below </em></strong>using different machine sizes. Let‚Äôs see how high it can go.</p></div></div></section><section name="fee7" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="e38a" id="e38a" class="graf graf--h4 graf--leading">Learned something? Click the üëè to say ‚Äúthanks!‚Äù and help others find this¬†article.</h4><p name="1ae3" id="1ae3" class="graf graf--p graf-after--h4"><em class="markup--em markup--p-em">Hold down the clap button if you liked the content! It helps me gain exposure¬†.</em></p><p name="cded" id="cded" class="graf graf--p graf-after--p">Want to learn more? Check out my previous articles</p><div name="8c7e" id="8c7e" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/coinmonks/setting-up-your-first-distributed-private-storage-network-on-ipfs-part-1-a6ff15222b90" data-href="https://medium.com/coinmonks/setting-up-your-first-distributed-private-storage-network-on-ipfs-part-1-a6ff15222b90" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/coinmonks/setting-up-your-first-distributed-private-storage-network-on-ipfs-part-1-a6ff15222b90"><strong class="markup--strong markup--mixtapeEmbed-strong">Setting up your first distributed private storage network on IPFS: Part 1</strong><br><em class="markup--em markup--mixtapeEmbed-em">IPFS Private Storage Network Series</em>medium.com</a><a href="https://medium.com/coinmonks/setting-up-your-first-distributed-private-storage-network-on-ipfs-part-1-a6ff15222b90" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="0a4116cc1919f965610839552f3d1256" data-thumbnail-img-id="1*ns6pbkuJN3vFMJSqDLDVww.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*ns6pbkuJN3vFMJSqDLDVww.png);"></a></div><div name="c0b7" id="c0b7" class="graf graf--mixtapeEmbed graf-after--mixtapeEmbed"><a href="https://medium.com/coinmonks/13-sidechain-projects-every-blockchain-developer-should-know-about-804b65364107" data-href="https://medium.com/coinmonks/13-sidechain-projects-every-blockchain-developer-should-know-about-804b65364107" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/coinmonks/13-sidechain-projects-every-blockchain-developer-should-know-about-804b65364107"><strong class="markup--strong markup--mixtapeEmbed-strong">13 sidechain projects every blockchain developer should know about</strong><br><em class="markup--em markup--mixtapeEmbed-em">The whole world is going through the blockchain revolution. But wait‚Ä¶is this really what we dreamed of? Present‚Ä¶</em>medium.com</a><a href="https://medium.com/coinmonks/13-sidechain-projects-every-blockchain-developer-should-know-about-804b65364107" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="47a933f0a2a854e802a0df436c7a5c2c" data-thumbnail-img-id="1*0lBFcDwvD7ryBTJLSnzYdg.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*0lBFcDwvD7ryBTJLSnzYdg.png);"></a></div><div name="455a" id="455a" class="graf graf--mixtapeEmbed graf-after--mixtapeEmbed"><a href="https://medium.com/coinmonks/hosting-a-site-for-free-on-ipfs-1028748f2afd" data-href="https://medium.com/coinmonks/hosting-a-site-for-free-on-ipfs-1028748f2afd" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/coinmonks/hosting-a-site-for-free-on-ipfs-1028748f2afd"><strong class="markup--strong markup--mixtapeEmbed-strong">Hosting a site for free on IPFS</strong><br><em class="markup--em markup--mixtapeEmbed-em">This is a short guide, through which you can have your site running for free in few minutes!! So, let‚Äôs get started</em>medium.com</a><a href="https://medium.com/coinmonks/hosting-a-site-for-free-on-ipfs-1028748f2afd" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="a926a3528af2ecefabdb75fa1cf24362" data-thumbnail-img-id="1*zQXDtcy-WNH33Y0ZVo9gxg.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*zQXDtcy-WNH33Y0ZVo9gxg.jpeg);"></a></div><p name="bc9e" id="bc9e" class="graf graf--p graf-after--mixtapeEmbed graf--trailing"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Clap 50 times and follow me on Twitter: </em></strong><a href="https://twitter.com/itsmattward" data-href="https://twitter.com/itsmattward" class="markup--anchor markup--p-anchor" rel="noopener nofollow nofollow noopener noopener" target="_blank"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">@</em></strong></a><a href="https://twitter.com/vasa_develop" data-href="https://twitter.com/vasa_develop" class="markup--anchor markup--p-anchor" rel="noopener nofollow nofollow noopener noopener" target="_blank"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">vasa_develop</em></strong></a></p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@vaibhavsaini_67863" class="p-author h-card">vasa</a> on <a href="https://medium.com/p/792f39d0b43f"><time class="dt-published" datetime="2018-05-08T18:03:32.605Z">May 8, 2018</time></a>.</p><p><a href="https://medium.com/@vaibhavsaini_67863/quorum-stress-test-1-140-tps-792f39d0b43f" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on July 19, 2019.</p></footer></article></body></html>